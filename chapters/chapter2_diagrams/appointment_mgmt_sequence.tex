\begin{tikzpicture}
\begin{sequencediagram}
    \newthread{p}{Patient}
    \newinst[1]{s}{System}
    \newinst[1]{t}{Therapist}
    \newinst[1]{n}{Notification}
    
    \begin{call}{p}{Request Appointment}{s}{Show Available Slots}
        \begin{call}{s}{Get Therapist Calendar}{t}{Calendar Data}
        \end{call}
    \end{call}
    
    \begin{call}{p}{Select Time Slot}{s}{Slot Reserved}
        \begin{callself}{s}{Check Availability}{}
        \end{callself}
        \begin{call}{s}{Send Request}{t}{Pending Approval}
            \begin{call}{s}{Create Notification}{n}{Notification Sent}
            \end{call}
        \end{call}
    \end{call}

    \begin{call}{t}{Approve Appointment}{s}{Confirmed}
        \begin{callself}{s}{Update Calendar}{}
        \end{callself}
        \begin{call}{s}{Send Confirmation}{n}{}
            \begin{call}{n}{Notify Patient}{p}{Confirmed}
            \end{call}
        \end{call}
    \end{call}
    
    \begin{call}{s}{Send Reminder}{n}{}
        \begin{call}{n}{Notify Both}{p}{Reminder Sent}
        \end{call}
        \begin{call}{n}{Notify Both}{t}{Reminder Sent}
        \end{call}
    \end{call}
\end{sequencediagram}
\end{tikzpicture}